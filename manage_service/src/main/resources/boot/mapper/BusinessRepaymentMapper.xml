<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zw.miaofuspd.mapper.BusinessRepaymentMapper">
    <resultMap id="BaseResultMap" type="com.zw.pojo.BusinessRepayment">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Jul 20 14:24:23 CST 2018.
        -->
        <id column="id" jdbcType="VARCHAR" property="id"/>
        <result column="order_no" jdbcType="VARCHAR" property="orderNo"/>
        <result column="repayment_id" jdbcType="VARCHAR" property="repaymentId"/>
        <result column="status" jdbcType="VARCHAR" property="status"/>
        <result column="period" jdbcType="INTEGER" property="period"/>
        <result column="interest_start_time" jdbcType="TIMESTAMP" property="interestStartTime"/>
        <result column="repayment_time" jdbcType="TIMESTAMP" property="repaymentTime"/>
        <result column="repayment_yes_time" jdbcType="TIMESTAMP" property="repaymentYesTime"/>
        <result column="repayment_account" jdbcType="DECIMAL" property="repaymentAccount"/>
        <result column="repayment_yes_account" jdbcType="DECIMAL" property="repaymentYesAccount"/>
        <result column="capital" jdbcType="DECIMAL" property="capital"/>
        <result column="yes_capital" jdbcType="DECIMAL" property="yesCapital"/>
        <result column="rate" jdbcType="DECIMAL" property="rate"/>
        <result column="interest" jdbcType="DECIMAL" property="interest"/>
        <result column="repayment_yes_interest" jdbcType="DECIMAL" property="repaymentYesInterest"/>
        <result column="is_repayment" jdbcType="INTEGER" property="isRepayment"/>
        <result column="repayment_type" jdbcType="INTEGER" property="repaymentType"/>
        <result column="late_days" jdbcType="INTEGER" property="lateDays"/>
        <result column="late_rate" jdbcType="DECIMAL" property="lateRate"/>
        <result column="late_interest" jdbcType="DECIMAL" property="lateInterest"/>
        <result column="derate_amount" jdbcType="DECIMAL" property="derateAmount"/>
        <result column="periods" jdbcType="INTEGER" property="periods"/>
        <result column="channel_type" jdbcType="VARCHAR" property="channelType"/>
        <result column="remark" jdbcType="VARCHAR" property="remark"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="create_user_id" property="createUserId" jdbcType="VARCHAR"/>
        <result column="update_user_id" property="updateUserId" jdbcType="VARCHAR"/>
        <result column="update_time" property="updateTime" jdbcType="TIMESTAMP"/>
        <result column="is_deleted" property="isDeleted" jdbcType="INTEGER"/>
    </resultMap>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Jul 20 19:14:40 CST 2018.
        -->
        delete from business_repayment
        where id = #{id,jdbcType=VARCHAR}
    </delete>
    <insert id="insert" parameterType="com.zw.pojo.BusinessRepayment">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Jul 20 19:14:40 CST 2018.
        -->
        <!--<selectKey keyProperty="id" order="AFTER" resultType="java.lang.String">-->
            <!--SELECT LAST_INSERT_ID()-->
        <!--</selectKey>-->
        insert into business_repayment (id,order_no, repayment_id, status,
        period, interest_start_time, repayment_time,
        repayment_yes_time, repayment_account, repayment_yes_account,
        capital, yes_capital, rate,
        interest, repayment_yes_interest, is_repayment,
        repayment_type, late_days, late_rate,
        late_interest, derate_amount, periods,
        channel_type, remark, create_time,
        create_user_id, update_user_id, update_time,
        is_deleted)
        values (#{id,jdbcType=VARCHAR},#{orderNo,jdbcType=VARCHAR}, #{repaymentId,jdbcType=VARCHAR},
        #{status,jdbcType=VARCHAR},
        #{period,jdbcType=INTEGER}, #{interestStartTime,jdbcType=TIMESTAMP}, #{repaymentTime,jdbcType=TIMESTAMP},
        #{repaymentYesTime,jdbcType=TIMESTAMP}, #{repaymentAccount,jdbcType=DECIMAL},
        #{repaymentYesAccount,jdbcType=DECIMAL},
        #{capital,jdbcType=DECIMAL}, #{yesCapital,jdbcType=DECIMAL}, #{rate,jdbcType=DECIMAL},
        #{interest,jdbcType=DECIMAL}, #{repaymentYesInterest,jdbcType=DECIMAL}, #{isRepayment,jdbcType=INTEGER},
        #{repaymentType,jdbcType=INTEGER}, #{lateDays,jdbcType=INTEGER}, #{lateRate,jdbcType=DECIMAL},
        #{lateInterest,jdbcType=DECIMAL}, #{derateAmount,jdbcType=DECIMAL}, #{periods,jdbcType=INTEGER},
        #{channelType,jdbcType=VARCHAR}, #{remark,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP},
        #{createUserId,jdbcType=VARCHAR}, #{updateUserId,jdbcType=VARCHAR}, #{updateTime,jdbcType=TIMESTAMP},
        #{isDeleted,jdbcType=INTEGER})
    </insert>
    <update id="updateByPrimaryKey" parameterType="com.zw.pojo.BusinessRepayment">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Jul 20 19:14:40 CST 2018.
        -->
        pdate business_repayment
        set order_no = #{orderNo,jdbcType=VARCHAR},
        repayment_id = #{repaymentId,jdbcType=VARCHAR},
        status = #{status,jdbcType=VARCHAR},
        period = #{period,jdbcType=INTEGER},
        interest_start_time = #{interestStartTime,jdbcType=TIMESTAMP},
        repayment_time = #{repaymentTime,jdbcType=TIMESTAMP},
        repayment_yes_time = #{repaymentYesTime,jdbcType=TIMESTAMP},
        repayment_account = #{repaymentAccount,jdbcType=DECIMAL},
        repayment_yes_account = #{repaymentYesAccount,jdbcType=DECIMAL},
        capital = #{capital,jdbcType=DECIMAL},
        yes_capital = #{yesCapital,jdbcType=DECIMAL},
        rate = #{rate,jdbcType=DECIMAL},
        interest = #{interest,jdbcType=DECIMAL},
        repayment_yes_interest = #{repaymentYesInterest,jdbcType=DECIMAL},
        is_repayment = #{isRepayment,jdbcType=INTEGER},
        repayment_type = #{repaymentType,jdbcType=INTEGER},
        late_days = #{lateDays,jdbcType=INTEGER},
        late_rate = #{lateRate,jdbcType=DECIMAL},
        late_interest = #{lateInterest,jdbcType=DECIMAL},
        derate_amount = #{derateAmount,jdbcType=DECIMAL},
        periods = #{periods,jdbcType=INTEGER},
        channel_type = #{channelType,jdbcType=VARCHAR},
        remark = #{remark,jdbcType=VARCHAR},
        create_time = #{createTime,jdbcType=TIMESTAMP},
        create_user_id = #{createUserId,jdbcType=VARCHAR},
        update_user_id = #{updateUserId,jdbcType=VARCHAR},
        update_time = #{updateTime,jdbcType=TIMESTAMP},
        is_deleted = #{isDeleted,jdbcType=INTEGER}
        where id = #{id,jdbcType=VARCHAR}
    </update>
    <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Jul 20 19:14:40 CST 2018.
        -->
        select id, order_no, repayment_id, status, period, interest_start_time, repayment_time,
        repayment_yes_time, repayment_account, repayment_yes_account, capital, yes_capital,
        rate, interest, repayment_yes_interest, is_repayment, repayment_type, late_days,
        late_rate, late_interest, derate_amount, periods, channel_type, remark
        from business_repayment
        where id = #{id,jdbcType=VARCHAR}
    </select>
    <select id="selectAll" resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Jul 20 19:14:40 CST 2018.
        -->
        select id, order_no, repayment_id, status, period, interest_start_time, repayment_time,
        repayment_yes_time, repayment_account, repayment_yes_account, capital, yes_capital,
        rate, interest, repayment_yes_interest, is_repayment, repayment_type, late_days,
        late_rate, late_interest, derate_amount, periods, channel_type, remark
        from business_repayment
    </select>

    <select id="getByOrderIdAndPeriod" parameterType="com.zw.pojo.BusinessRepayment" resultMap="BaseResultMap">
      select id, order_no, repayment_id, status, period, interest_start_time, repayment_time,
      repayment_yes_time, repayment_account, repayment_yes_account, capital, yes_capital,
      rate, interest, repayment_yes_interest, is_repayment, repayment_type, late_days,
      late_rate, late_interest, derate_amount, periods, channel_type, remark, create_time,
      create_user_id, update_user_id, update_time, is_deleted
      from business_repayment
      where order_no = #{orderNo,jdbcType=VARCHAR} and  period = #{period,jdbcType=INTEGER}
  </select>

  <select id="findListByOrderId" parameterType="com.zw.pojo.BusinessRepayment" resultMap="BaseResultMap">
      SELECT
        id,
        order_no,
        repayment_id,
        STATUS,
        period,
        date(interest_start_time) as interestStartTime,
        repayment_time,
        repayment_yes_time,
        repayment_account,
        repayment_yes_account,
        capital,
        yes_capital,
        rate,
        interest,
        repayment_yes_interest,
        is_repayment,
        repayment_type,
        late_days,
        late_rate,
        late_interest,
        derate_amount,
        periods,
        channel_type,
        remark,
        create_time,
        create_user_id,
        update_user_id,
        update_time,
        is_deleted
      FROM business_repayment
      where
        <if test="record.orderNo != null" >
            order_no = #{record.orderNo,jdbcType=VARCHAR}
        </if>
        <if test="record.status != null" >
          and status = #{record.status,jdbcType=VARCHAR}
        </if>
           ORDER BY period desc
    </select>

  <select id="findRepaymentInfoByStatus"  resultMap="BaseResultMap">
      SELECT order_no,DATE(repayment_time)as repaymentTime  FROM business_repayment  WHERE status = #{status}
  </select>
  <update id="updateRepaymentById" parameterType="com.zw.pojo.BusinessRepayment">
        update business_repayment
        <set >
            <if test="orderNo != null" >
                order_no = #{orderNo,jdbcType=VARCHAR},
            </if>
            <if test="repaymentId != null" >
                repayment_id = #{repaymentId,jdbcType=VARCHAR},
            </if>
            <if test="status != null" >
                status = #{status,jdbcType=VARCHAR},
            </if>
            <if test="period != null" >
                period = #{period,jdbcType=INTEGER},
            </if>
            <if test="interestStartTime != null" >
                interest_start_time = #{interestStartTime,jdbcType=TIMESTAMP},
            </if>
            <if test="repaymentTime != null" >
                repayment_time = #{repaymentTime,jdbcType=TIMESTAMP},
            </if>
            <if test="repaymentYesTime != null" >
                repayment_yes_time = #{repaymentYesTime,jdbcType=TIMESTAMP},
            </if>
            <if test="repaymentAccount != null" >
                repayment_account = #{repaymentAccount,jdbcType=DECIMAL},
            </if>
            <if test="repaymentYesAccount != null" >
                repayment_yes_account = #{repaymentYesAccount,jdbcType=DECIMAL},
            </if>
            <if test="capital != null" >
                capital = #{capital,jdbcType=DECIMAL},
            </if>
            <if test="yesCapital != null" >
                yes_capital = #{yesCapital,jdbcType=DECIMAL},
            </if>
            <if test="rate != null" >
                rate = #{rate,jdbcType=DECIMAL},
            </if>
            <if test="interest != null" >
                interest = #{interest,jdbcType=DECIMAL},
            </if>
            <if test="repaymentYesInterest != null" >
                repayment_yes_interest = #{repaymentYesInterest,jdbcType=DECIMAL},
            </if>
            <if test="isRepayment != null" >
                is_repayment = #{isRepayment,jdbcType=INTEGER},
            </if>
            <if test="repaymentType != null" >
                repayment_type = #{repaymentType,jdbcType=INTEGER},
            </if>
            <if test="lateDays != null" >
                late_days = #{lateDays,jdbcType=INTEGER},
            </if>
            <if test="lateRate != null" >
                late_rate = #{lateRate,jdbcType=DECIMAL},
            </if>
            <if test="lateInterest != null" >
                late_interest = #{lateInterest,jdbcType=DECIMAL},
            </if>
            <if test="derateAmount != null" >
                derate_amount = #{derateAmount,jdbcType=DECIMAL},
            </if>
            <if test="periods != null" >
                periods = #{periods,jdbcType=INTEGER},
            </if>
            <if test="channelType != null" >
                channel_type = #{channelType,jdbcType=VARCHAR},
            </if>
            <if test="remark != null" >
                remark = #{remark,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null" >
                create_time = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="createUserId != null" >
                create_user_id = #{createUserId,jdbcType=VARCHAR},
            </if>
            <if test="updateUserId != null" >
                update_user_id = #{updateUserId,jdbcType=VARCHAR},
            </if>
            <if test="updateTime != null" >
                update_time = #{updateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="isDeleted != null" >
                is_deleted = #{isDeleted,jdbcType=INTEGER},
            </if>
        </set>
        where id = #{id,jdbcType=VARCHAR}
    </update>

  <update id="updateByOrderIdAndPeriod" parameterType="com.zw.pojo.BusinessRepayment">
        update business_repayment
        <set >
            <if test="orderNo != null" >
                order_no = #{orderNo,jdbcType=VARCHAR},
            </if>
            <if test="repaymentId != null" >
                repayment_id = #{repaymentId,jdbcType=VARCHAR},
            </if>
            <if test="status != null" >
                status = #{status,jdbcType=VARCHAR},
            </if>
            <if test="period != null" >
                period = #{period,jdbcType=INTEGER},
            </if>
            <if test="interestStartTime != null" >
                interest_start_time = #{interestStartTime,jdbcType=TIMESTAMP},
            </if>
            <if test="repaymentTime != null" >
                repayment_time = #{repaymentTime,jdbcType=TIMESTAMP},
            </if>
            <if test="repaymentYesTime != null" >
                repayment_yes_time = #{repaymentYesTime,jdbcType=TIMESTAMP},
            </if>
            <if test="repaymentAccount != null" >
                repayment_account = #{repaymentAccount,jdbcType=DECIMAL},
            </if>
            <if test="repaymentYesAccount != null" >
                repayment_yes_account = #{repaymentYesAccount,jdbcType=DECIMAL},
            </if>
            <if test="capital != null" >
                capital = #{capital,jdbcType=DECIMAL},
            </if>
            <if test="yesCapital != null" >
                yes_capital = #{yesCapital,jdbcType=DECIMAL},
            </if>
            <if test="rate != null" >
                rate = #{rate,jdbcType=DECIMAL},
            </if>
            <if test="interest != null" >
                interest = #{interest,jdbcType=DECIMAL},
            </if>
            <if test="repaymentYesInterest != null" >
                repayment_yes_interest = #{repaymentYesInterest,jdbcType=DECIMAL},
            </if>
            <if test="isRepayment != null" >
                is_repayment = #{isRepayment,jdbcType=INTEGER},
            </if>
            <if test="repaymentType != null" >
                repayment_type = #{repaymentType,jdbcType=INTEGER},
            </if>
            <if test="lateDays != null" >
                late_days = #{lateDays,jdbcType=INTEGER},
            </if>
            <if test="lateRate != null" >
                late_rate = #{lateRate,jdbcType=DECIMAL},
            </if>
            <if test="lateInterest != null" >
                late_interest = #{lateInterest,jdbcType=DECIMAL},
            </if>
            <if test="derateAmount != null" >
                derate_amount = #{derateAmount,jdbcType=DECIMAL},
            </if>
            <if test="periods != null" >
                periods = #{periods,jdbcType=INTEGER},
            </if>
            <if test="channelType != null" >
                channel_type = #{channelType,jdbcType=VARCHAR},
            </if>
            <if test="remark != null" >
                remark = #{remark,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null" >
                create_time = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="createUserId != null" >
                create_user_id = #{createUserId,jdbcType=VARCHAR},
            </if>
            <if test="updateUserId != null" >
                update_user_id = #{updateUserId,jdbcType=VARCHAR},
            </if>
            <if test="updateTime != null" >
                update_time = #{updateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="isDeleted != null" >
                is_deleted = #{isDeleted,jdbcType=INTEGER},
            </if>
        </set>
      where order_no = #{orderNo,jdbcType=VARCHAR} and  period = #{period,jdbcType=INTEGER}
    </update>

</mapper>